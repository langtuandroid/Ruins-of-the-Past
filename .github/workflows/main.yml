name: test, build and push the application to itch.io
run-name: testing, building and pushing for ${{ github.actor }}
on:
  push:
    branches:
      - 'main'
jobs:
  activate:
    name: Activate license
    runs-on: ubuntu-latest
    steps:
    - name: List Files Action
      uses: mirko-felice/list-files-action@v3.0.5
      with:
        repo: ${{ github.repository }}
        ref: ${{ github.ref }}
        path: "."
        ext: ""
    - uses: game-ci/unity-test-runner@v3
      env:
        UNITY_LICENSE: ${{ secrets.UNITY_LICENSE }}
        UNITY_EMAIL: ${{ secrets.UNITY_EMAIL  }}
        UNITY_PASSWORD: ${{ secrets.UNITY_PASSWORD  }}
      with:
        projectPath: ${{ env.PROJECT_PATH }}
        githubToken: ${{ secrets.GITHUB_TOKEN }}

